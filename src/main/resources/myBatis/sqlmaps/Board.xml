<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Board">

    <!-- 글 저장하기 -->
    <insert  id="BoardInsert" >
        insert into board
        (
        b_idx,
        title,
        cont,
        r_score,
        indate,
        b_count,
        menu_id,
        u_id,
        g_idx
        )
        values
        (
        ( select nvl(max(b_idx),0)+1 from board ),
        #{title},
        #{cont},
        #{r_score},
        sysdate,
        0,
        #{menu_id},
        #{u_id},
        #{g_idx}
        )
    </insert>

    <!-- 글 수정 -->
    <update  id="BoardUpdate">
        update board
        set   title   = #{title},
              cont    = #{cont},
              r_score = #{r_score}
        where b_idx   = #{b_idx}
    </update>

    <!-- 글 목록 불러오기 -->
    <select id="List"
            resultType="com.project.board.vo.BoardVo">
        select  a.b_idx,
                a.title,
                a.cont,
                a.r_score,
                a.indate,
                a.b_count,
                a.menu_id,
                b.g_name,
                a.g_idx,
                a.u_id
        from  board a
        inner join gamelist b
        on a.g_idx = b.g_idx
        where
        <if test="g_idx != null">
            g_idx   = #{g_idx}
            and
        </if>
        menu_id = #{menu_id}
        order by b_idx desc
    </select>

    <!-- 글 불러오기 -->
    <select id="View"
            resultType="com.project.board.vo.BoardVo">
        select *
        from board
        where b_idx = #{b_idx}
    </select>

    <!-- 글 삭제하기 -->
    <delete id="Delete">
        delete from board
        where b_idx = #{b_idx}
    </delete>

</mapper>