<!DOCTYPE html>
<html>
<head>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
h1,h2,h3,h4,h5,h6 {font-family: "Oswald"}
body {font-family: "Open Sans"}
</style>
</head>
<body class="w3-light-grey">
<header class="w3-container w3-center w3-padding-48 w3-white">
  <h1 class="w3-xxxlarge"><b>Banana Quick</b></h1>
  <h6><span class="w3-tag">delivery's world</span></h6>
</header>


<!-- w3-content defines a container for fixed size centered content,
and is wrapped around the whole page content, except for the footer in this example -->
<div class="w3-content" style="max-width:1600px">

  <!-- Grid -->
  <div class="w3-row w3-padding w3-border">

    <!-- Blog entries -->
    <div class="w3-col l8 s12">

      <!-- Blog entry -->
      <div class="w3-container w3-white w3-margin w3-padding-large">
        <div class="w3-center">
          <h3>${ boardVo.title }</h3>
          <h5>${ boardVo.writer } <span class="w3-opacity">${ boardVo.indate }</span></h5>
          <h5>${boardVo.c_start} <span class="w3-opacity">${boardVo.c_end}</span> ${boardVo.delivery_indate}</h5>
          <h5>${boardVo.money} <span class="w3-opacity">${boardVo.luggage}</span> ${boardVo.board_check}</h5>
        </div>

        <div class="w3-justify">
          <p>${ boardVo.cont }</p>
          <table>
            <tr>
              <td>
          <p class="w3-left">
          <form name = "UpdateBoard" method = "get">
            <input type = "hidden" name ="board_number" value= "${boardVo.board_number}"/>
            <input type = "hidden" name = "menu_id" value= "${menu_id}"/>
            <input type = "hidden" name=  "writer"  value = "${boardVo.writer}"/>
          <button class="w3-button w3-white w3-border" onclick="likeFunction(this)"><b> 수정</b></button>
          </form>
              </td>
              <td>
                <b><input type = "button" id = "delete" value= "삭제" onclick = "DeleteBoard()" class="w3-button w3-white w3-border"/></b>
              </td>
              <td>
                <b><a href="/Board/customerList?menu_id=MENU_01&pageNum=${boardPager.getPageNum()+1}&contentNum=${(boardPager.getPageNum()+1)*10}"
                      class="w3-button w3-white w3-border">목록으로</a></b>
              </td>
            </tr>
          </table>


          <p class="w3-right"><button class="w3-button w3-black" onclick="myFunction('demo')" id="myBtn"><b>댓글</b> </button></p>
          <p class="w3-clear"></p>
          <div class="w3-row w3-margin-bottom" id="demo" style="display:none">
            <hr>

              <div class="w3-col l10 m9" id='Replyli'>
              </div>
          </div>
        </div>
      </div>
      <hr>


    <!-- END BLOG ENTRIES -->
    </div>

    <!-- About/Information menu -->




    <!-- END About/Intro Menu -->
    </div>

  <!-- END GRID -->
  </div>

<!-- END w3-content -->
</div>

<!-- Subscribe Modal -->


<script>
// Toggle between hiding and showing blog replies/comments
document.getElementById("myBtn").click();
function myFunction(id) {
  var x = document.getElementById(id);
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else {
    x.className = x.className.replace(" w3-show", "");
  }
}

function replylist(){
      $.ajax({
        type:"GET",
        url: "/Board/CReplyList?board_number=${boardVo.board_number}&menu_id=${menu_id}&pageNum=${map.pageNum}&contentNum=${map.contentNum}",
        success: function(resultList){
          let html = "";
          let pager = "";
          let RPager = "";
          if (resultList.length >0){
            let end = parseInt(resultList[0].rend_page)
            let startP = parseInt("${replyPager.getStartPage()}");
                      html+= '<table>';
                      for(var i=0; i<resultList.length; i++){
                        html+= '<tr>';
                        html+= '<td>';
                        html+= resultList[i].writer;
                        html+= '</td>';
                        html+= '</tr>';
                        html+= '<tr>';
                        html+= '<td id="R'+ resultList[i].reply_number +'">';
                        html+= resultList[i].cont;
                        html+= '</td>';
                        html+= '</tr>';
                        html+= '<tr>';
                        html+= '<td>';
                        html+= resultList[i].indate;
                        html+= '</td>';
                        html+= '<td>';
                        html+= '<button type="button" class="btn" name = "replyupdateBtn" onclick="updateReplyForm('+ resultList[i].reply_number + ',\'' + resultList[i].writer +'\')">수정</button>';
                        html+= '</td>';
                        html+= '<td>';
                        html+= '<button type="button" class="btndelte" name="replydeleteBtn"';
                        html+= 'onclick="deleteReply('+ resultList[i].reply_number+',\''+ resultList[i].writer +'\',${replyPager.getEndPage()})">삭제</button>';
                        html+= '</td>';
                        html+= '<td>';
                        html+= '<button type="button" class="checkbtn" name="checkbtnbtn" onclick="checkbutton()">접수하기</button>';
                        html+= '</td>';
                        html+= '<td>';
                        html+= '<button type="button" class="checkbtnbtn" name="checkbtn" onclick="checkbuttonbtn()">접수완료</button>';
                        html+= '</td>';
                        html+= '<td>';
                        html+= '<button type="button" class="checkbtnbtn" name="checkbtn" onclick="checkdelitebtn()">접수취소</button>';
                        html+= '</td>';
                        html+= '<td>';
                        html+=  '<input type="button" onclick="sendSMS()" value="전송하기" />'
                        html+= '</td>';
                        html+= '</tr>';
                      }
                      $('#Replyli').html(html);
                      RPager += '</table>';
                      RPager += '<table id="pager">';
                      RPager += '<tr>';
                      RPager += '<td>';
                      RPager += '<c:if test="${replyPager.prev}">';
                      RPager += '<a href="/Board/CustomerDetail?board_number=${replyPager.board_number}&menu_id=${menu_id}&pageNum=${replyPager.getStartPage()-1}&contentNum=${(replyPager.getStartPage()-1)*10}">< 이전</a>';
                      RPager += '</c:if>';
                      RPager += '</td>';
                      RPager += '<td>';
                      for (var j=startP; j<=end; j++){
                        RPager += '<a href="/Board/CustomerDetail?board_number=${replyPager.board_number}&menu_id=${menu_id}&pageNum='+j+'&contentNum='+j*10+'">'+j+'</a>';
                      }
                      RPager += '</td>';
                      RPager += '<td>';
                      if("${replyPager.next}"=="true"){
                        RPager += '<a href="/Board/CustomerDetail?board_number=${replyPager.board_number}&menu_id=${menu_id}&pageNum=${replyPager.getEndPage()+1}&contentNum=${(replyPager.getEndPage()+1)*10}">다음 ></a>';
                      }
                      RPager += '</td>';
                      RPager += '</tr>';
                      RPager += '</table>';
                      $('#ReplyPa').html(RPager);

          }else{ let end ="";

          let startP = parseInt("${replyPager.getStartPage()}");
          html+= '<table>';
          for(var i=0; i<resultList.length; i++){
            html+= '<tr>';
            html+= '<td>';
            html+= resultList[i].writer;
            html+= '</td>';
            html+= '</tr>';
            html+= '<tr>';
            html+= '<td id="R'+ resultList[i].reply_number +'">';
            html+= resultList[i].cont;
            html+= '</td>';
            html+= '</tr>';
            html+= '<tr>';
            html+= '<td>';
            html+= resultList[i].indate;
            html+= '</td>';
            html+= '<td>';
            html+= '<button type="button" class="btn" name = "replyupdateBtn" onclick="updateReplyForm('+ resultList[i].reply_number + ',\'' + resultList[i].writer +'\')">수정</button>';
            html+= '</td>';
            html+= '<td>';
            html+= '<button type="button" class="btndelte" name="replydeleteBtn"';
            html+= 'onclick="deleteReply('+ resultList[i].reply_number+',\''+ resultList[i].writer +'\',${replyPager.getEndPage()})">삭제</button>';
            html+= '</td>';
            html+= '<td>';
            html+= '<button type="button" class="checkbtn" name="checkbtnbtn" onclick="checkbutton()">접수완료</button>';
            html+= '</td>';
            html+= '</tr>';
          }
          $('#Replyli').html(html);
          RPager += '</table>';
          RPager += '<table id="pager">';
          RPager += '<tr>';
          RPager += '<td>';
          RPager += '<c:if test="${replyPager.prev}">';
          RPager += '<a href="/Board/CustomerDetail?board_number=${replyPager.board_number}&menu_id=${menu_id}&pageNum=${replyPager.getStartPage()-1}&contentNum=${(replyPager.getStartPage()-1)*10}">< 이전</a>';
          RPager += '</c:if>';
          RPager += '</td>';
          RPager += '<td>';
          for (var j=startP; j<=end; j++){
            RPager += '<a href="/Board/CustomerDetail?board_number=${replyPager.board_number}&menu_id=${menu_id}&pageNum='+j+'&contentNum='+j*10+'">'+j+'</a>';
          }
          RPager += '</td>';
          RPager += '<td>';
          if("${replyPager.next}"=="true"){
            RPager += '<a href="/Board/CustomerDetail?board_number=${replyPager.board_number}&menu_id=${menu_id}&pageNum=${replyPager.getEndPage()+1}&contentNum=${(replyPager.getEndPage()+1)*10}">다음 ></a>';
          }
          RPager += '</td>';
          RPager += '</tr>';
          RPager += '</table>';
          $('#ReplyPa').html(RPager);
        }
      }
      });
    }

</script>

</body>
</html>

